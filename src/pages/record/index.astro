---
import CardHistory from "@components/record/CardHistory.astro";
import CardTotal from "@components/record/CardTotal.astro";
import Title from "@header/Title.astro";
import Layout from "@layouts/Layout.astro";

const dataCardHistory = [
    {
        id: 1,
        date: "12/12/2021",
        name: "Donato Silva",
        price: 20000,
    },
    {
        id: 2,
        date: "12/12/2021",
        name: "Juan Silva",
        price: 20000,
    },
    {
        id: 3,
        date: "12/12/2021",
        name: "Esteban Reyes",
        price: 20000,
    },
    {
        id: 4,
        date: "12/12/2021",
        name: "Juan Silva",
        price: 20000,
    },
    {
        id: 5,
        date: "12/12/2021",
        name: "Esteban Reyes",
        price: 20000,
    },
    {
        id: 6,
        date: "12/12/2021",
        name: "Juan Silva",
        price: 20000,
    },
    {
        id: 7,
        date: "12/12/2021",
        name: "Esteban Reyes",
        price: 20000,
    },
    {
        id: 8,
        date: "12/12/2021",
        name: "Juan Silva",
        price: 20000,
    },
    {
        id: 9,
        date: "12/12/2021",
        name: "Esteban Reyes",
        price: 20000,
    },
    {
        id: 10,
        date: "12/12/2021",
        name: "Juan Silva",
        price: 20000,
    },
    {
        id: 11,
        date: "12/12/2021",
        name: "Esteban Reyes",
        price: 20000,
    },
    {
        id: 12,
        date: "12/12/2021",
        name: "Juan Silva",
        price: 20000,
    },
    {
        id: 13,
        date: "12/12/2021",
        name: "Esteban Reyes",
        price: 20000,
    },
    {
        id: 14,
        date: "12/12/2021",
        name: "Juan Silva",
        price: 20000,
    },
    {
        id: 15,
        date: "12/12/2021",
        name: "Esteban Reyes",
        price: 20000,
    },
    {
        id: 16,
        date: "12/12/2021",
        name: "Juan Silva",
        price: 20000,
    },
    {
        id: 17,
        date: "12/12/2021",
        name: "Esteban Reyes",
        price: 20000,
    },
];

const client = {
    id: 1,
    telephone: "300 123 4567",
    count: dataCardHistory.length,
};

const { count, telephone } = client;
const prices = dataCardHistory.map(({ price }) => price);
---

<Layout>
    <Title size="md" />
    <section class="flex flex-col justify-center items-center">
        <CardTotal count={count} total={prices} telephone={telephone} />
    </section>
    <section>
        <h2 class="text-2xl text-H-blue-900 font-bold">
            Historial de domicilios
        </h2>
        <div class="flex flex-col gap-4 mt-6">
            {
                dataCardHistory.map(({ date, name, price }, index) => (
                    <>
                        <CardHistory date={date} name={name} price={price} />

                        {index < dataCardHistory.length - 1 ? (
                            <hr class="border-t-2 w-20 mx-auto border-H-blue-300" />
                        ) : (
                            ""
                        )}
                    </>
                ))
            }
        </div>
    </section>
</Layout>

<style></style>

<script></script>
